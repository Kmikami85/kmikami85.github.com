<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[My Tech Blog]]></title>
  <link href="http://Kmikami85.github.com/atom.xml" rel="self"/>
  <link href="http://Kmikami85.github.com/"/>
  <updated>2014-02-03T16:35:23+09:00</updated>
  <id>http://Kmikami85.github.com/</id>
  <author>
    <name><![CDATA[Mikami Kazuya]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Setup Wireless Network With USB Wifi Adapter]]></title>
    <link href="http://Kmikami85.github.com/blog/2014/02/03/setup-wireless-network-with-usb-wifi-adapter/"/>
    <updated>2014-02-03T16:17:23+09:00</updated>
    <id>http://Kmikami85.github.com/blog/2014/02/03/setup-wireless-network-with-usb-wifi-adapter</id>
    <content type="html"><![CDATA[<p>This archive provides the way how to enable wireless internet connection using USB wifi adapter.
I selected USB wifi adapter &ldquo;Buffalo WLI-UC-GNM2&rdquo; and this article is given the method on this particular H/W.</p>

<h2>1. Verify USB wifi adapter device.</h2>

<p>First of all, you will need to insert USB wifi adapter into BeagleBoard-xM USB slot.
Once getting detected, you will able to see exact product name, manufacturer and so on.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; lsusb
</span><span class='line'>Bus 001 Device 004: ID 0411:01a2 BUFFALO INC. (formerly MelCo., Inc.) WLI-UC-GNM Wireless LAN Adapter [Ralink RT8070]</span></code></pre></td></tr></table></div></figure>


<p>Also try dmesg with searching name of &ldquo;usbcore&rdquo;.
Please refer last line, you can see &ldquo;rt2800usb&rdquo;, this is exactly used USB driver for the wifi adapter.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; dmesg | grep usbcore
</span><span class='line'>[    0.224853] usbcore: registered new interface driver usbfs
</span><span class='line'>[    0.224945] usbcore: registered new interface driver hub
</span><span class='line'>[    0.225219] usbcore: registered new device driver usb
</span><span class='line'>[    0.829833] usbcore: registered new interface driver cdc_ether
</span><span class='line'>[    0.829925] usbcore: registered new interface driver rndis_host
</span><span class='line'>[    0.830047] usbcore: registered new interface driver cdc_ncm
</span><span class='line'>[    1.882110] usbcore: registered new interface driver usb-storage
</span><span class='line'>[    2.301086] usbcore: registered new interface driver snd-usb-6fire
</span><span class='line'>[   18.209228] usbcore: registered new interface driver smsc95xx
</span><span class='line'>[   23.241851] usbcore: registered new interface driver rt2800usb</span></code></pre></td></tr></table></div></figure>


<p>Next you need to verify whether using Linux Kernel supports the USB driver.
It will show installed driver list on the installed ArchLinux upon executing lsmod.
Now you can see the term &ldquo;rt2800usb&rdquo;. Which mean you won&rsquo;t need any additional driver as Linux already supports the required USB driver.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; lsmod
</span><span class='line'>Module                  Size  Used by
</span><span class='line'>arc4                    1692  2
</span><span class='line'>rt2800usb              14783  0
</span><span class='line'>rt2800lib              55454  1 rt2800usb
</span><span class='line'>crc_ccitt               1574  1 rt2800lib
</span><span class='line'>rt2x00usb              10836  1 rt2800usb
</span><span class='line'>rt2x00lib              51647  3 rt2x00usb,rt2800lib,rt2800usb
</span><span class='line'>mac80211              482298  3 rt2x00lib,rt2x00usb,rt2800lib
</span><span class='line'>cfg80211              189670  2 mac80211,rt2x00lib
</span><span class='line'>rfkill                 18278  4 cfg80211
</span><span class='line'>smsc95xx               15424  0
</span><span class='line'>twl4030_madc_hwmon      2631  0
</span><span class='line'>gpio_keys               8145  0
</span><span class='line'>autofs4                22254  2</span></code></pre></td></tr></table></div></figure>


<h2>2. Bring interface with &ldquo;ip link set wlan0 up&rdquo;.</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; ip link set wlan0 up</span></code></pre></td></tr></table></div></figure>


<p>Check output of &ldquo;ip link&rdquo;.
The UP in &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; is what indicates the interface is up, not the later state DOWN.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; ip link
</span><span class='line'>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default
</span><span class='line'>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span><span class='line'>2: eth0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT group default qlen 1000
</span><span class='line'>    link/ether 0e:ba:23:f0:6e:e9 brd ff:ff:ff:ff:ff:ff
</span><span class='line'>3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
</span><span class='line'>    link/ether 10:6f:3f:ec:e7:f8 brd ff:ff:ff:ff:ff:ff</span></code></pre></td></tr></table></div></figure>


<h2>3. Install required packages for wireless network setting.</h2>

<p>Install wireless_tools to use iwconfig.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; pacman -S wireless_tools</span></code></pre></td></tr></table></div></figure>


<p>Install iw to use iw for access point discovery.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; pacman -S iw</span></code></pre></td></tr></table></div></figure>


<p>Install wpa_supplicant for WPA/WPA2 encryption setting.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; pacman -S wpa_supplicant</span></code></pre></td></tr></table></div></figure>


<h2>4. Discovery available access point.</h2>

<p>Execute iw command to discover candidates of access point in your environment.
To check result later, it is redirected to a text file.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; iw dev wlan0 scan | less &gt; ap_list.txt</span></code></pre></td></tr></table></div></figure>


<p>Here a result of discovering output to ap_list.txt.
You can find access point what you are currently using named in SSID.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>SSID: WARPSTAR-F46952
</span><span class='line'>capability: ESS Privacy ShortPreamble ShortSlotTime (0x0431)
</span><span class='line'>signal: -43.00 dBm
</span><span class='line'>WPA:     * Version: 1
</span><span class='line'>* Group cipher: CCMP
</span><span class='line'>* Pairwise ciphers: CCMP
</span><span class='line'>* Authentication suites: PSK</span></code></pre></td></tr></table></div></figure>


<p>If you like to use ad-hoc(IBSS) mode, you can execute below command.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; iw dev wlan0 set type ibss</span></code></pre></td></tr></table></div></figure>


<h2>5. Associate wifi access point.</h2>

<p>Enter your SSID and Password of your access point and redirect to configuration file.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; wpa_passphrase myid mypass &gt; /etc/wpa_supplicant/wpa_supplicant_kazuya.conf</span></code></pre></td></tr></table></div></figure>


<p>You will able to see below structure for example.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>network={
</span><span class='line'>        ssid="WARPSTAR-F46952"
</span><span class='line'>        #psk="Entered Password"
</span><span class='line'>        psk=Encrypted password
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Associate wifi access point.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; wpa_supplicant -B -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant_kazuya.conf</span></code></pre></td></tr></table></div></figure>


<p>Verify it&rsquo;s association is success.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; iw dev wlan0 link
</span><span class='line'>Connected to 00:1b:8b:e8:6b:4e (on wlan0)
</span><span class='line'>        SSID: WARPSTAR-F46952
</span><span class='line'>        freq: 2427
</span><span class='line'>        RX: 264636 bytes (1499 packets)
</span><span class='line'>        TX: 2098 bytes (34 packets)
</span><span class='line'>        signal: -43 dBm
</span><span class='line'>        tx bitrate: 6.5 MBit/s MCS 0
</span><span class='line'>
</span><span class='line'>        bss flags:      short-preamble short-slot-time
</span><span class='line'>        dtim period:    1
</span><span class='line'>        beacon int:     100</span></code></pre></td></tr></table></div></figure>


<h2>6. Bring dhcp address.</h2>

<p>Now let&rsquo;s try to bring IP connection using DHCP.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; dhcpcd wlan0
</span><span class='line'>dhcpcd[183]: version 6.1.0 starting
</span><span class='line'>dhcpcd[183]: wlan0: soliciting an IPv6 uter
</span><span class='line'>dhcpcd[183]: wlan0: soliciting a DHCP lease
</span><span class='line'>dhcpcd[183]: wlan0: Router Advertisement from fe80::212:e2ff:fe70:97f8
</span><span class='line'>dhcpcd[183]: dhcp6_start: wlan0: Protocol not available
</span><span class='line'>dhcpcd[183]: wlan0: offered 192.168.0.9 from 192.168.0.1
</span><span class='line'>
</span><span class='line'>dhcpcd[183]: wlan0: leased 192.168.0.9 for 86400 seconds
</span><span class='line'>dhcpcd[183]: wlan0: adding host route to 192.168.0.9 via 127.0.0.1
</span><span class='line'>dhcpcd[183]: wlan0: adding route to 192.168.0.0/24
</span><span class='line'>dhcpcd[183]: wlan0: adding default route via 192.168.0.1
</span><span class='line'>dhcpcd[183]: forked to background, child pid 311</span></code></pre></td></tr></table></div></figure>


<p>You should use internet connection from now on.</p>

<h2>7. Automated wireless connection at boot.</h2>

<p>Create vim /etc/systemd/system/network-wireless\@.service with any editor.
Edit setting as below.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Unit]
</span><span class='line'>Description=Wireless network connectivity (%i)
</span><span class='line'>Wants=network.target
</span><span class='line'>Before=network.target
</span><span class='line'>BindsTo=sys-subsystem-net-devices-%i.device
</span><span class='line'>After=sys-subsystem-net-devices-%i.device
</span><span class='line'>
</span><span class='line'>[Service]
</span><span class='line'>Type=oneshot
</span><span class='line'>RemainAfterExit=yes
</span><span class='line'>
</span><span class='line'>ExecStart=/usr/bin/ip link set dev %i up
</span><span class='line'>ExecStart=/usr/bin/wpa_supplicant -B -i %i -c /etc/wpa_supplicant/wpa_supplicant_kazuya.conf
</span><span class='line'>ExecStart=/usr/bin/dhcpcd %i
</span><span class='line'>
</span><span class='line'>ExecStop=/usr/bin/ip link set dev %i down
</span><span class='line'>
</span><span class='line'>[Install]
</span><span class='line'>WantedBy=multi-user.target</span></code></pre></td></tr></table></div></figure>


<p>Start service.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; systemctl start network-wireless\@wlan0.service</span></code></pre></td></tr></table></div></figure>


<p>If wireless network works fine, enable the service to start internet connection at boot.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; systemctl enable network-wireless\@wlan0.service</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Arch Linux Installation]]></title>
    <link href="http://Kmikami85.github.com/blog/2014/02/03/arch-linux-installation/"/>
    <updated>2014-02-03T16:04:49+09:00</updated>
    <id>http://Kmikami85.github.com/blog/2014/02/03/arch-linux-installation</id>
    <content type="html"><![CDATA[<p>If you are able to see below prompt after power-ON beagleboard-xM with inserting SD card,
It means you have installed Arch Linux successfully. Let&rsquo;s start basic setting of Linux.</p>

<h2>1. Enter Arch Linux.(login:root password:root)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Arch Linux 3.7.10-9-ARCH (ttyO2)
</span><span class='line'>
</span><span class='line'>alarm login: root
</span><span class='line'>Password:</span></code></pre></td></tr></table></div></figure>


<h2>2. Change host name.(hostname:kazuya-server)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; hostnamectl set-hostname kazuya-server</span></code></pre></td></tr></table></div></figure>


<p>The command will be reflected on /etc/hostname.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; cat /etc/hostname
</span><span class='line'>kazuya-server</span></code></pre></td></tr></table></div></figure>


<h2>3. Add User.(user id:kazuya)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt;useradd -m -s /bin/bash kazuya
</span><span class='line'>&gt;passwd kazuya
</span><span class='line'>Enter new UNIX password:
</span><span class='line'>Retype new UNIX password:
</span><span class='line'>passwd: password updated successfully</span></code></pre></td></tr></table></div></figure>


<h2>4. Enable added user to use root command with using sudo command.</h2>

<p>Open visudo editor for this particular purpose.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; VISUAL="/usr/bin/vim -p -X" visudo</span></code></pre></td></tr></table></div></figure>


<p>Add new below line to give sudo permission.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>##
</span><span class='line'>## User privilege specification
</span><span class='line'>##
</span><span class='line'>root ALL=(ALL) ALL
</span><span class='line'>kazuya ALL=(ALL) ALL    // Give sudo permission to user "kazuya".</span></code></pre></td></tr></table></div></figure>


<h2>5. Change locale as Japanese setting.</h2>

<p>Open the text /etc/locale.gen using any editor.
Uncomment below lines.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#en_SG ISO-8859-1
</span><span class='line'>en_US.UTF-8 UTF-8    // UTF-8 support for English.
</span><span class='line'>#en_US ISO-8859-1
</span><span class='line'>
</span><span class='line'>#ja_JP.EUC-JP EUC-JP
</span><span class='line'>ja_JP.UTF-8 UTF-8    // UTF-8 support for Japanese.
</span><span class='line'>#ka_GE.UTF-8 UTF-8</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SD Card Creation]]></title>
    <link href="http://Kmikami85.github.com/blog/2014/02/03/sd-card-creation/"/>
    <updated>2014-02-03T14:59:15+09:00</updated>
    <id>http://Kmikami85.github.com/blog/2014/02/03/sd-card-creation</id>
    <content type="html"><![CDATA[<p>This archive provides how to create micro SD card for BeagleBoard-xM with bundled Arch Linux.
Arch Linux requires advance knowledge of Linux otherwise it won&rsquo;t work anything.
Please note, below steps are expected to be performed on Linux machine.
In my case I used Ubuntu for the creation.</p>

<h2>1. Create SD card partition.(Assuming micro SD card is detected as /dev/sdb)</h2>

<p>I used 16GB SD card, created 128MB space for boot partition and remaining size space for rootfs partition.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; fdisk /dev/sdb
</span><span class='line'>Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel
</span><span class='line'>Building a new DOS disklabel with disk identifier 0xf8d3c4ab.
</span><span class='line'>Changes will remain in memory only, until you decide to write them.
</span><span class='line'>After that, of course, the previous content won't be recoverable.
</span><span class='line'>
</span><span class='line'>Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)
</span><span class='line'>
</span><span class='line'>Command (m for help): n
</span><span class='line'>Partition type:
</span><span class='line'>   p   primary (0 primary, 0 extended, 4 free)
</span><span class='line'>   e   extended
</span><span class='line'>Select (default p): p
</span><span class='line'>Partition number (1-4, default 1): 1
</span><span class='line'>First sector (2048-30703615, default 2048):
</span><span class='line'>Using default value 2048
</span><span class='line'>Last sector, +sectors or +size{K,M,G} (2048-30703615, default 30703615): +128M
</span><span class='line'>
</span><span class='line'>Command (m for help): t
</span><span class='line'>Selected partition 1
</span><span class='line'>Hex code (type L to list codes): e
</span><span class='line'>Changed system type of partition 1 to e (W95 FAT16 (LBA))
</span><span class='line'>
</span><span class='line'>Command (m for help): a
</span><span class='line'>Partition number (1-4): 1
</span><span class='line'>
</span><span class='line'>Command (m for help): m
</span><span class='line'>Command action
</span><span class='line'>   a   toggle a bootable flag
</span><span class='line'>   b   edit bsd disklabel
</span><span class='line'>   c   toggle the dos compatibility flag
</span><span class='line'>   d   delete a partition
</span><span class='line'>   l   list known partition types
</span><span class='line'>   m   print this menu
</span><span class='line'>   n   add a new partition
</span><span class='line'>   o   create a new empty DOS partition table
</span><span class='line'>   p   print the partition table
</span><span class='line'>   q   quit without saving changes
</span><span class='line'>   s   create a new empty Sun disklabel
</span><span class='line'>   t   change a partition's system id
</span><span class='line'>   u   change display/entry units
</span><span class='line'>   v   verify the partition table
</span><span class='line'>   w   write table to disk and exit
</span><span class='line'>   x   extra functionality (experts only)
</span><span class='line'>
</span><span class='line'>Command (m for help): n
</span><span class='line'>Partition type:
</span><span class='line'>   p   primary (1 primary, 0 extended, 3 free)
</span><span class='line'>   e   extended
</span><span class='line'>Select (default p): p
</span><span class='line'>Partition number (1-4, default 2): 2
</span><span class='line'>First sector (264192-30703615, default 264192):
</span><span class='line'>Using default value 264192
</span><span class='line'>Last sector, +sectors or +size{K,M,G} (264192-30703615, default 30703615):
</span><span class='line'>Using default value 30703615
</span><span class='line'>
</span><span class='line'>Command (m for help): w
</span><span class='line'>The partition table has been altered!
</span><span class='line'>
</span><span class='line'>Calling ioctl() to re-read partition table.
</span><span class='line'>
</span><span class='line'>WARNING: If you have created or modified any DOS 6.x
</span><span class='line'>partitions, please see the fdisk manual page for additional
</span><span class='line'>information.
</span><span class='line'>Syncing disks.</span></code></pre></td></tr></table></div></figure>


<h2>2. Format created the partitions.</h2>

<p>Be sure to copy MLO first.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; wget http://archlinuxarm.org/os/omap/BeagleBoard-bootloader.tar.gz
</span><span class='line'>&gt; tar xvzf BeagleBoard-bootloader.tar.gz
</span><span class='line'>./mkcard.sh
</span><span class='line'>./MLO
</span><span class='line'>./u-boot.bin
</span><span class='line'>./uEnv.txt
</span><span class='line'>&gt; cp MLO /media/boot/
</span><span class='line'>&gt; cp MLO u* /media/boot/
</span><span class='line'>&gt; sync</span></code></pre></td></tr></table></div></figure>


<h2>3. Download ArchLinux file system and copy to boot partition.</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; wget http://archlinuxarm.org/os/ArchLinuxARM-omap-smp-latest.tar.gz
</span><span class='line'>&gt; tar xvpzf ArchLinuxARM-omap-smp-latest.tar.gz -C /media/rootfs/</span></code></pre></td></tr></table></div></figure>


<h2>4. Copy kernel image which is existing under the rootfs/boot/ to boot partition.</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; cp /media/rootfs/boot/uImage .
</span><span class='line'>&gt; sync
</span><span class='line'>&gt; ls
</span><span class='line'>ArchLinuxARM-omap-smp-latest.tar.gz BeagleBoard-bootloader.tar.gz uImage
</span><span class='line'>&gt; cp uImage /media/boot/
</span><span class='line'>&gt; sync</span></code></pre></td></tr></table></div></figure>


<h2>5. Create boot.scr through boot.cmd.</h2>

<p>Here contents of boot.cmd for example.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>setenv bootargs 'console=ttyO2,115200n8 root=/dev/mmcblk0p2 rw rootfstype=ext3 rootwait'
</span><span class='line'>mmc rescan
</span><span class='line'>fatload mmc 0 0x80300000 uImage
</span><span class='line'>bootm 0x80300000
</span><span class='line'>boot</span></code></pre></td></tr></table></div></figure>


<p>Execute below command to make boot.scr.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; mkimage -A arm -O linux -T script -C none -a 0 -e 0 -n "Beagleboard-xM boot script" -d boot.cmd boot.scr</span></code></pre></td></tr></table></div></figure>


<h2>6. Copy boot.cmd and boot.scr to boot partition.</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; cp boot.cmd boot.scr /media/boot/
</span><span class='line'>&gt; sync</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
</feed>
